schemaVersion: "2.0.0"

metadataTest:
  env:
    - key: "JAVA_HOME"
      value: "/opt/java/openjdk"

commandTests:
  - name: "Java version"
    command: "java"
    args: ["-version"]
    expectedOutput: ["openjdk version \"17\""]

  - name: "Strategy Discovery Pipeline Dry Run"
    command: "java"
    args: ["-jar", "/src/main/java/com/verlumen/tradestream/discovery/app_deploy.jar", "--dryRun=true"]
    expectedOutput: 
      - "Starting strategy discovery pipeline in DRY mode"
      - "Creating dry run discovery requests"
      - "Would persist strategy:"
      - "Strategy discovery pipeline completed"
