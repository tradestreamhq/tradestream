# See https://github.com/GoogleContainerTools/container-structure-test#command-tests
schemaVersion: 2.0.0
commandTests:
  - name: "Dry pipeline run"
    command: java
    args:
      - '-Dio.jenetics.util.defaultRandomGenerator=Random'
      - '-jar'
      - '/src/main/java/com/verlumen/tradestream/pipeline/app_deploy.jar'
      - '--maxForwardIntervals=1'
      - '--runMode=dry'
    expectedError:
      - 'DRY/RUN'
      - 'Starting TradeToCandle transform \(Combine\.perKey version\) with window duration: PT60S'
      - 'Processing actual candle for key DRY\/RUN at 1970\-01\-01T00\:20\:59\.999Z'
